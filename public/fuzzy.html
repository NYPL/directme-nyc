<!DOCTYPE html>
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Fuzzy test - Census</title>


<!--
-->
<script src="js/libs/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="js/libs/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
<link type="text/css" href="css/smoothness/jquery-ui-1.8.18.custom.css" rel="stylesheet" />
<script type="text/javascript">
	var streets = [];
	function matchStreets(input) {
		var trimmed = input.replace(/\s/,'');
		var reg = new RegExp(trimmed.split('').join('[^\\n]*'), 'i');
		return streets.filter(function(st) {
			if (st.match(reg)) {
				return st;
			}
		});
	}
	function callback(req, resp) {
		var filtered = matchStreets(req.term);
		resp(filtered);
	}
	function init () {
		loadCSV();
	}
	function loadCSV () {
		$.get("streets.csv", function (content) {
			streets = content.split(new RegExp(/\n/))
				.map(function (element) {
				//Do what ever tidy up here
				return $.trim(element);
			});
			$( "#streets-field" ).autocomplete({
				source: callback
			});
		});
	}
	window.onload = function () {
		init();
	}

</script>

</head>

<body>

<div class="ui-widget">
	<label for="streets-field">Street: </label>
	<input id="streets-field" />
</div>

</body>
</html>
